{% extends "emails/base_email.html" %}
{% load tz %}

{% block title %}Mérkőzés emlékeztető - JAR{% endblock %}

{% block header_title %}Mérkőzés emlékeztető{% endblock %}

{% block content %}
<p style="font-size: 16px; color: #1e293b;">Kedves {{ user.get_full_name|default:user.first_name }}!</p>

{% if days_until == 1 %}
<p>Emlékeztetünk, hogy <strong>holnap</strong> mérkőzésed lesz.</p>
{% elif days_until == 0 %}
<p style="color: #dc2626; font-weight: 600;">Emlékeztetünk, hogy <strong>ma</strong> mérkőzésed van!</p>
{% else %}
<p>Emlékeztetünk, hogy <strong>{{ days_until }} nap múlva</strong> mérkőzésed lesz.</p>
{% endif %}

<table class="data-table">
    <tr>
        <th>Mérkőzés időpontja</th>
        <td><strong>{{ match.date|date:"Y.m.d" }} ({{ match.date|date:"l" }}) {{ match.time|time:"H:i" }}</strong></td>
    </tr>
    <tr>
        <th>Helyszín</th>
        <td><strong>{{ match.venue.name }}</strong>{% if match.venue.city %}, {{ match.venue.city }}{% endif %}</td>
    </tr>
    {% if match.venue.address %}
    <tr>
        <th>Cím</th>
        <td>{{ match.venue.address }}</td>
    </tr>
    {% endif %}
    <tr>
        <th>Bajnokság</th>
        <td>{{ match.phase.competition.name|default:match.competition.name }}</td>
    </tr>
    {% if not match.is_tournament %}
    <tr>
        <th>Hazai csapat</th>
        <td>{{ match.home_team.name|default:"TBD" }}</td>
    </tr>
    <tr>
        <th>Vendég csapat</th>
        <td>{{ match.away_team.name|default:"TBD" }}</td>
    </tr>
    {% else %}
    <tr>
        <th>Esemény típus</th>
        <td style="color: #7c3aed; font-weight: 600;">Torna</td>
    </tr>
    {% endif %}
    <tr class="section-divider highlight">
        <th>Pozíciód</th>
        <td>{{ assignment.get_role_display }}</td>
    </tr>
    {% if assignment.meeting_time %}
    <tr class="highlight">
        <th>Találkozó</th>
        <td><strong>{{ assignment.meeting_time|time:"H:i" }}</strong></td>
    </tr>
    {% endif %}
</table>

{% if assignment.note %}
<div class="alert alert-warning" style="margin-top: 16px;">
    <strong>Megjegyzés:</strong> {{ assignment.note }}
</div>
{% endif %}

{% if match.venue.google_maps_url %}
<p style="text-align: center; margin-top: 20px;">
    <a href="{{ match.venue.google_maps_url }}" class="btn btn-success" target="_blank">Helyszín a térképen</a>
</p>
{% endif %}

<div class="alert alert-warning" style="margin-top: 20px;">
    <strong>Ne felejtsd el:</strong>
    <ul style="margin: 10px 0 0 0; padding-left: 20px;">
        <li>Időben indulj el a helyszínre</li>
        <li>Vigyél magaddal minden szükséges felszerelést</li>
        <li>Ha probléma adódik, azonnal értesítsd a koordinátort</li>
    </ul>
</div>

<p style="margin-top: 20px;">Sikeres mérkőzést kívánunk!</p>

<p style="text-align: center; margin-top: 20px;">
    <a href="{{ site_url }}{% url 'matches:my_matches' %}" class="btn">Mérkőzéseim</a>
</p>
{% endblock %}
